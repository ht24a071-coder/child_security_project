# ゲームで学ぶ！防犯ゲーム

子供向けの防犯教育を目的としたアドベンチャーゲームです。
マップを探索しながら家に帰る過程で、不審者遭遇イベントや防犯クイズが発生します。
展示会等での試遊を想定し、タッチ操作対応や放置時の自動リセット機能を実装しています。

## 🛠 開発環境
- エンジン: Ren'Py
- 言語: Ren'Py Script (Pythonベース)
- エディタ: VS Code

## 📂 ファイル構成と役割
主要なコードは `game/` フォルダ内にあります。機能ごとにファイルを分割して管理しています。

| ファイル名 | 役割 | 備考 |
| --- | --- | --- |
| **script.rpy** | ゲーム進行のメインループ | プロフ設定後、`travel_loop` でマップ移動を制御します。 |
| **def_mapdat.rpy** | マップ・イベントデータ管理 | 地点のつながり(JSON形式)や、発生するイベントリストを管理。 |
| **backgrounds.rpy** | 背景管理ロジック | イベントや場所に応じた背景画像の切り替え定義。 |
| **screens.rpy** | 画面デザイン (UI) | プロフィール設定、時間制限、タイトル画面など。 |
| **definitions.rpy** | 定数・変数定義 | 二つ名単語リスト、アバター画像、共通変数など。 |
| **minigame.rpy** | ミニゲームロジック | 帰宅時の鍵開けタイミングゲーム等の処理。 |
| **options.rpy** | ゲーム全体の設定 | 画面サイズ、音量、ビルド設定など。 |

## ✨ 主な実装機能

### 1. マップ探索システム (`def_mapdat.rpy`, `script.rpy`)
- **ノードベース移動**: `world_map` に定義された地点（ノード）を選択肢として移動します。
- **イベント抽選**:
    - 各地点には「安全(safe)」「不審(suspicious)」などのグループが設定されています。
    - 移動時に確率で `event_pools` から未読のイベントが抽選・実行されます。

### 2. プロフィール生成 (`screens.rpy`, `definitions.rpy`)
- **二つ名システム**: 形容詞・名詞リストを組み合わせて、ユニークなプレイヤー名を自動/手動設定。
- **アバター選択**: 動物アイコンなどのリストからプレイヤーの見た目を選択可能。

### 3. 展示用・放置対策 (`screens.rpy`)
- **inactivity_guard**: ゲーム中に一定時間操作がない場合、自動的にタイトル画面に戻り、次の試遊者がスムーズに始められるようにしています。

### 4. 帰宅アクション (`minigame.rpy`)
- 家の前に到着すると発生する「鍵開けタイミングゲーム」を実装。成功するとゲームクリアとなります。

## 🚀 実行方法
1. Ren'Py Launcher を起動。
2. プロジェクト一覧から本プロジェクトを選択。
3. 「プロジェクトを起動」をクリック。

## 📝 開発メモ
- **イベントの追加**: 新しいイベントラベルを作成し、`def_mapdat.rpy` の `event_pools` に追加することで抽選対象になります。
- 画像ファイルは `game/images/` 以下にルールに従って格納してください。